{% extends 'base.html' %}
{% load static %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>Expense List</h1>
    <a href="{% url 'add_expense' %}"><button>Add Expense</button></a>
    
<form method="get" action="{% url 'expense_list' %}">
        <label for="category">Filter by Category:</label>
        <select name="category" id="category">
            <option value="">All Categories</option>
            <option value="food">Food</option>
            <option value="transport">Transport</option>
            <option value="entertainment">Entertainment</option>
            <option value="bills">Bills</option>
            <option value="other">Other</option>
        </select>
        <button type="submit">Filter</button>
        <label for="sort_by">Sort by:</label>
        <select name="sort_by" id="sort_by">
            <option value="">Select</option>
            <option value="amount">Amount</option>
            <option value="date">Date</option>
        </select>
        <button type="submit">Sort</button>
    </form>

    <div class="table-responsive mt-3">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Name</th>
                    <th>Amount</th>
                    <th>Actions</th>              
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                    <tr>
                        <td>{{ expense.date }}</td>
                        <td>{{ expense.get_category_display }}</td>
                        <td>{{ expense.name }}</td>
                        <td>{{ expense.amount }}</td>
                        <td>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <a href="{% url 'edit_expense' expense.id %}" class="btn btn-primary btn-sm">‚úèÔ∏è Edit</a>
                                <form action="{% url 'delete_expense' expense.id %}" method="post" style="margin: 0;">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-danger btn-sm">üóë Delete</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>    

    <div class="d-flex justify-content-end mb-3">
        <a href="{% url 'delete_all_expenses' %}" class="btn btn-warning">
            ‚ö†Ô∏è Delete All Expenses
        </a>
    </div>
</body>
</html>

{% endblock %}
