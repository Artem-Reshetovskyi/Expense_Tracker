{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<h1>{% trans "Expense List" %}</h1>

<!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ´Ğ»Ñ Ğ´Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ -->
<a href="{% url 'add_expense' %}"><button>{% trans "Add Expense" %}</button></a>

<!-- Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— Ñ‚Ğ° ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ -->
<form method="get" action="{% url 'expense_list' %}">
    <!-- Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ Ğ·Ğ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ”Ñ -->
    <label for="category">{% trans "Filter by Category" %}:</label>
    <select name="category" id="category">
        <option value="">{% trans "All Categories" %}</option>
        <option value="food" {% if request.GET.category == 'food' %}selected{% endif %}>{% trans "Food" %}</option>
        <option value="transport" {% if request.GET.category == 'transport' %}selected{% endif %}>{% trans "Transport" %}</option>
        <option value="entertainment" {% if request.GET.category == 'entertainment' %}selected{% endif %}>{% trans "Entertainment" %}</option>
        <option value="bills" {% if request.GET.category == 'bills' %}selected{% endif %}>{% trans "Bills" %}</option>
        <option value="other" {% if request.GET.category == 'other' %}selected{% endif %}>{% trans "Other" %}</option>
    </select>

    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— -->
    <button type="submit">{% trans "Filter" %}</button>

    <!-- Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ Ğ·Ğ° Ğ´Ğ°Ñ‚Ğ¾Ñ -->
    <label for="date_from">{% trans "From Date" %}:</label>
    <input type="date" name="date_from" id="date_from" value="{{ request.GET.date_from }}">

    <label for="date_to">{% trans "To Date" %}:</label>
    <input type="date" name="date_to" id="date_to" value="{{ request.GET.date_to }}">

    <!-- Ğ¡Ğ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ -->
    <label for="sort_by">{% trans "Sort by" %}:</label>
    <select name="sort_by" id="sort_by">
        <option value="">{% trans "Select" %}</option>
        <option value="amount" {% if request.GET.sort_by == 'amount' %}selected{% endif %}>{% trans "Amount" %}</option>
        <option value="date" {% if request.GET.sort_by == 'date' %}selected{% endif %}>{% trans "Date" %}</option>
    </select>

    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ -->
    <button type="submit">{% trans "Sort" %}</button>

    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞºĞ¸Ğ´Ğ°Ğ½Ğ½Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ñ–Ğ² -->
    <button type="reset" onclick="window.location.href='{% url 'expense_list' %}'">{% trans "Reset" %}</button>
</form>


<!-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ğ´Ğ»Ñ Ğ²Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ -->
<div class="table-responsive mt-3">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th style="width: 1%; white-space: nowrap;">{% trans "Date" %}</th>
                <th>{% trans "Category" %}</th>
                <th>{% trans "Name" %}</th>
                <th>{% trans "Amount" %}</th>
                <th style="width: 1%; white-space: nowrap;">{% trans "Actions" %}</th> <!-- Ğ”Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ ÑÑ‚Ğ¸Ğ»ÑŒ -->
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
                <tr>
                    <td style="text-align: right; white-space: nowrap;">{{ expense.date }}</td>
                    <td>{{ expense.get_category_display }}</td>
                    <td>{{ expense.name }}</td>
                    <td>{{ expense.amount }}</td>
                    <td style="text-align: right; white-space: nowrap;"> <!-- Ğ”Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ ÑÑ‚Ğ¸Ğ»ÑŒ -->
                        <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ -->
                        <div style="display: flex; gap: 10px; justify-content: flex-end; align-items: center;">
                            <a href="{% url 'edit_expense' expense.id %}" class="btn btn-primary btn-sm">âœï¸ {% trans "Edit" %}</a>
                            <form action="{% url 'delete_expense' expense.id %}" style="margin: 0;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger btn-sm">ğŸ—‘ {% trans "Delete" %}</button>
                            </form>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>    

<!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ğ²ÑÑ–Ñ… Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ -->
<div class="d-flex justify-content-end mb-3">
    <a href="{% url 'delete_all_expenses' %}" class="btn btn-warning">
        âš ï¸ {% trans "Delete All Expenses" %}
    </a>
</div>
{% endblock %}
